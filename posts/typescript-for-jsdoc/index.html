<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=alternate type=application/atom+xml title=redoPop href=https://redopop.com/feed.atom><link rel=apple-touch-icon-precomposed href=/apple-touch-icon.png><link rel=mask-icon href=/mask-icon.svg color=#3296f0><title>Supporting TypeScript from JavaScript codebases - redoPop</title><meta name=description content="The TypeScript compiler can generate type declarations from JSDoc comments in JavaScript sources. I&rsquo;ve been using it to provide TypeScript support for Node libraries that are still maintained as pure JavaScript.
While TypeScript has quickly taken over front-end library development, many Node libraries are still maintained as pure JS. That&rsquo;s partly due to differences in lifecycles and codebase maturity, but there&rsquo;s also a technical reason for the difference: in the front-end TypeScript is largely replacing an existing transpile step, so it&rsquo;s a natural evolution of longstanding development toolchains."><meta name=twitter:card content="summary"><meta name=twitter:site content="@redoPop"><meta name=twitter:creator content="@redoPop"><meta name=twitter:title content="Supporting TypeScript from JavaScript codebases"><meta name=twitter:image content="https://redopop.com/cloud-1024.png"><meta property="og:type" content="article"><meta property="og:url" content="https://redopop.com/posts/typescript-for-jsdoc/"><meta property="og:site_name" content="redoPop"><meta property="og:title" content="Supporting TypeScript from JavaScript codebases"><meta property="og:image" content="https://redopop.com/cloud-1024.png"><style>:root{--popful-blue:#00b4ff;--darker-blue:#151a30;--rich-purple:#28165d;--popful-green:#50fa7b;--light-violet:#9c79ff;--soft-violet:#bd93f9;--gray-blue:#ccced0;--off-gray:#d8d8d2;--yellow:#faf500;--magenta:#ff4bda;--red:#ff5555;--pink:#ff79c6}html{height:100%;line-height:1.5}body{background:#000b16;color:var(--off-gray);font-family:-apple-system,BlinkMacSystemFont,segoe ui,Roboto,Arial,sans-serif;font-size:1.12rem;margin:0;-webkit-margin-bottom-collapse:separate}a,a:visited{color:var(--pink)}*:focus-visible{outline:3px solid var(--popful-green);outline-offset:.4ex}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:andale mono wt,andale mono,monospace;font-size:1em;line-height:1.3;padding:1px .4ex;box-decoration-break:clone;-webkit-box-decoration-break:clone}pre{overflow:auto}h1,h2,h3,h4,h5,h6{margin:1rem 0;line-height:1.3}h1{font-size:2.2rem}:is(dl,hr,ol,p,pre,ul){margin:1.6rem 0}:is(h2,h3,h4,h5,h6)+:is(dl,hr,ol,p,pre,ul){margin-top:0}:is(dl,hr,ol,p,pre,ul)+:is(h2,h3,h4,h5,h6){margin-top:3rem}hr{background-color:var(--light-violet);border:none;height:3px;margin-top:3rem}figure{margin:0}figcaption{font-size:80%;opacity:.7;padding:0 2rem;font-style:italic}@media(min-width:42rem){body{font-size:1.2rem}h1{font-size:2.6rem}}.container{max-width:42rem;margin:0 auto;padding:0 20px}.Article:not(:last-child){border-bottom:3px solid var(--rich-purple);padding-bottom:1rem;margin:1rem 0}.Article__title{font-size:1.3rem;line-height:1.4;text-decoration:none}@media(min-width:30rem){.Article__title{font-size:1.6rem}}.Article__date{white-space:nowrap}.chroma{padding:20px;margin-left:-20px;margin-right:-20px}.Clouds{width:100%;height:min(600px,100%);position:absolute;top:0;z-index:-1}.Footer{font-size:1rem;margin-top:6rem;padding:3rem 0 2.4rem}@media(min-width:600px){.Footer__container{display:flex;justify-content:space-between;align-items:center}}@media(max-width:600px){.Footer__social{margin-top:1rem}}.Header{margin:2rem auto 3rem}.Header__home,.Header__home:visited{color:var(--gray-blue);border-bottom:3px solid var(--popful-blue);padding-bottom:.6rem;text-decoration:none}.Header__pop{color:var(--popful-blue)}.Heading__link{text-decoration:none}@media(min-width:46rem){.Heading{display:flex;align-items:flex-start;margin-left:-2rem}.Heading__link{order:-1;flex:none;text-align:center;width:2rem;height:auto}}.Page{display:grid;grid-template-columns:100%;grid-template-rows:1fr auto;min-height:100%}.Social{display:flex}@media(min-width:600px){.Social{margin:0}}.Social svg{fill:var(--off-gray);width:3rem;height:3rem}.Social a{display:flex;margin:0 .4rem}.Social a:first-child{margin-left:-.2rem}.Social a:last-child{margin-right:-.2rem}</style><link rel=stylesheet href=https://redopop.com/extended.927476d60bb24d52519d8c0e48566317940eb5ad653e27e91c6cf289d7ccd9fa.css media=print onload='this.onload=null,this.media="all"'><noscript><link rel=stylesheet href=https://redopop.com/extended.927476d60bb24d52519d8c0e48566317940eb5ad653e27e91c6cf289d7ccd9fa.css></noscript></head><body class=Page><div><object aria-hidden=true tabindex=-1 type=image/svg+xml data=https://redopop.com/images/clouds.f62d85c12b6c3206e9724b2b53e0a2c1.min.svg class=Clouds></object><header class="container Header" role=banner><a href=https://redopop.com/ rel=home class=Header__home aria-label=Home>redo<span class=Header__pop role=presentation>Pop</span></a></header><main class=h-entry itemscope itemtype=http://schema.org/Article aria-labelledby=title><div class=container><header><h1 class=p-name itemprop=name id=title>Supporting TypeScript from JavaScript codebases</h1><div style="display:flex;align-items:center;margin:1.2rem 0 4rem"><img src=https://redopop.com/images/poppet.32e87bf425aa5ea053381bcbd98105aa.min.svg role=img width=48 height=48 style=margin-right:.8rem title="Author photo"><div style=font-size:1rem><div class=p-author itemprop=author>Joe Bartlett
<span style=opacity:.8>(he/him, they/them)</span></div><div style=color:var(--soft-violet)><time class=dt-published datetime=2020-07-20 itemprop=datePublished title=Published>Jul 20, 2020</time></div></div></div></header><div class=e-content itemprop=articleBody><p>The TypeScript compiler can <a href=https://www.typescriptlang.org/docs/handbook/declaration-files/dts-from-js.html rel=external>generate type declarations from JSDoc comments in JavaScript sources</a>. I&rsquo;ve been using it to provide TypeScript support for Node libraries that are still maintained as pure JavaScript.</p><p>While TypeScript has quickly taken over front-end library development, many Node libraries are still maintained as pure JS. That&rsquo;s partly due to differences in lifecycles and codebase maturity, but there&rsquo;s also a technical reason for the difference: in the front-end TypeScript is largely replacing an existing transpile step, so it&rsquo;s a natural evolution of longstanding development toolchains. Since Node codebases don&rsquo;t contend with browser support, they have no natural need for such a transpile step. That makes transpilation – and its associated inconveniences to testing and debugging – a new friction when adopting TypeScript in Node. (This is one of <a href=https://deno.land/ rel=external>Deno&rsquo;s</a> draws: TypeScript support by default means less tooling to argue with.)</p><p>Regardless, type declaration files are a common feature request for Node libraries. The compiler&rsquo;s JSDoc support seems a good solution: it allows library contributors to work in pure JS, toolchains untampered, with only a <code>publish</code> script in <code>package.json</code> to generate <code>.d.ts</code> files for distribution:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=s2>&#34;publish&#34;</span><span class=err>:</span> <span class=s2>&#34;tsc --allowJs --declaration --emitDeclarationOnly --outDir .&#34;</span><span class=err>,</span>
</span></span></code></pre></div><p>That satisfies consumers&rsquo; expectations for type support without disrupting development, adding only a short automatic step to distribution and a single shallow dependency for <a href=https://www.npmjs.com/package/typescript rel=external><code>typescript</code></a> itself.</p></div><p style=margin-top:3rem><span style="border-top:3px solid var(--light-violet);padding-top:.6rem">Questions/corrections?
<a href=mailto:joe@redopop.com>Reach out!</a></span></p></div></main></div><footer class=Footer role=contentinfo><div class="container Footer__container"><span>redoPop is Joe Bartlett,<br>World Wide Web-slinger</span><div class=Footer__social><div class=Social><a href=https://github.com/redoPop rel="me external" title="redoPop on GitHub"><svg viewBox="0 0 100 100" aria-hidden="true"><use xlink:href="https://redopop.com/images/social.5e198b406e711257de140d305f7606ca.min.svg#github"/></svg></a><a href=https://pinboard.in/u:redoPop rel="me external" title="redoPop on Pinboard"><svg viewBox="0 0 100 100" aria-hidden="true"><use xlink:href="https://redopop.com/images/social.5e198b406e711257de140d305f7606ca.min.svg#pinboard"/></svg></a><a href=https://toot.cafe/@redoPop rel="me external" title="redoPop on Mastodon"><svg viewBox="0 0 100 100" aria-hidden="true"><use xlink:href="https://redopop.com/images/social.5e198b406e711257de140d305f7606ca.min.svg#mastodon"/></svg></a></div></div></div></footer></body></html>