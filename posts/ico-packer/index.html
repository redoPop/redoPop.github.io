<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=alternate type=application/atom+xml title=redoPop href=https://redopop.com/feed.atom><link rel=apple-touch-icon-precomposed href=/apple-touch-icon.png><link rel=mask-icon href=/mask-icon.svg color=#3296f0><title>Reduce a favicon‚Äôs footprint with ICO's PNG support - redoPop</title><meta name=description content="ICO remains a popular format for favicons. Historically images within an ICO were bitmaps, but the format has long supported PNG too. Since it makes for smaller filesizes, I figured ImageMagick would make a PNG-based ICO if fed only PNG sources:
convert 16x16.png 32x32.png 48x48.png favicon.ico Output size: 15 KB üôÄ ‚Äì almost 8√ó my sources. Icon Slate yields similar: 18 KB. Both tools are bundling bitmaps into the ICO rather than the source PNGs."><meta name=twitter:card content="summary"><meta name=twitter:site content="@redoPop"><meta name=twitter:creator content="@redoPop"><meta name=twitter:title content="Reduce a favicon‚Äôs footprint with ICO's PNG support"><meta name=twitter:image content="https://redopop.com/cloud-1024.png"><meta property="og:type" content="article"><meta property="og:url" content="https://redopop.com/posts/ico-packer/"><meta property="og:site_name" content="redoPop"><meta property="og:title" content="Reduce a favicon‚Äôs footprint with ICO's PNG support"><meta property="og:image" content="https://redopop.com/cloud-1024.png"><style>:root{--popful-blue: #00b4ff;--darker-blue: #151a30;--rich-purple: #28165d;--popful-green: #50fa7b;--light-violet: #9c79ff;--soft-violet: #bd93f9;--gray-blue: #ccced0;--off-gray: #d8d8d2;--yellow: #faf500;--magenta: #ff4bda;--red: #ff5555;--pink: #ff79c6}html{height:100%;line-height:1.5}body{background:#000b16;color:var(--off-gray);font-family:-apple-system,BlinkMacSystemFont,segoe ui,Roboto,Arial,sans-serif;font-size:1.12rem;margin:0;-webkit-margin-bottom-collapse:separate}a,a:visited{color:var(--pink)}*:focus-visible{outline:3px solid var(--popful-green);outline-offset:.4ex}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:andale mono wt,andale mono,monospace;font-size:1em;line-height:1.3;padding:1px .4ex;box-decoration-break:clone;-webkit-box-decoration-break:clone}pre{overflow:auto}h1,h2,h3,h4,h5,h6{margin:1rem 0;line-height:1.3}h1{font-size:2.2rem}:is(dl,hr,ol,p,pre,ul){margin:1.6rem 0}:is(h2,h3,h4,h5,h6)+:is(dl,hr,ol,p,pre,ul){margin-top:0}:is(dl,hr,ol,p,pre,ul)+:is(h2,h3,h4,h5,h6){margin-top:3rem}hr{background-color:var(--light-violet);border:none;height:3px;margin-top:3rem}@media(min-width:42rem){body{font-size:1.2rem}h1{font-size:2.6rem}}.container{max-width:42rem;margin:0 auto;padding:0 20px}.Article:not(:last-child){border-bottom:3px solid var(--rich-purple);padding-bottom:1rem;margin:1rem 0}.Article__title{font-size:1.3rem;line-height:1.4;text-decoration:none}@media(min-width:30rem){.Article__title{font-size:1.6rem}}.Article__date{white-space:nowrap}.Clouds{width:100%;height:min(600px,100%);position:absolute;top:0;z-index:-1}.Footer{font-size:1rem;margin-top:6rem;padding:3rem 0 2.4rem}@media(min-width:600px){.Footer__container{display:flex;justify-content:space-between;align-items:center}}@media(max-width:600px){.Footer__social{margin-top:1rem}}.Header{margin:2rem auto 3rem}.Header__home,.Header__home:visited{color:var(--gray-blue);border-bottom:3px solid var(--popful-blue);padding-bottom:.6rem;text-decoration:none}.Header__pop{color:var(--popful-blue)}.Heading__link{text-decoration:none}@media(min-width:46rem){.Heading{display:flex;align-items:flex-start;margin-left:-2rem}.Heading__link{order:-1;flex:none;text-align:center;width:2rem;height:auto}}.Page{display:grid;grid-template-columns:100%;grid-template-rows:1fr auto;min-height:100%}.Social{display:flex}@media(min-width:600px){.Social{margin:0}}.Social svg{fill:var(--off-gray);width:3rem;height:3rem}.Social a{display:flex;margin:0 .4rem}.Social a:first-child{margin-left:-.2rem}.Social a:last-child{margin-right:-.2rem}</style><link rel=stylesheet href=https://redopop.com/extended.8da3cacd4c4a9a1fa29211aefd5aa814c17a6016f355c8cc93df3b8099a39cf9.css media=print onload="this.onload=null;this.media='all';"><noscript><link rel=stylesheet href=https://redopop.com/extended.8da3cacd4c4a9a1fa29211aefd5aa814c17a6016f355c8cc93df3b8099a39cf9.css></noscript></head><body class=Page><div><object aria-hidden=true tabindex=-1 type=image/svg+xml data=https://redopop.com/images/clouds.f62d85c12b6c3206e9724b2b53e0a2c1.min.svg class=Clouds></object><header class="container Header" role=banner><a href=https://redopop.com/ rel=home class=Header__home aria-label=Home>redo<span class=Header__pop>Pop</span></a></header><main class=h-entry itemscope itemtype=http://schema.org/Article aria-labelledby=title><div class=container><header><h1 class=p-name itemprop=name id=title>Reduce a favicon‚Äôs footprint with ICO's PNG support</h1><div style="display:flex;align-items:center;margin:1.2rem 0 4rem"><img src=https://redopop.com/images/poppet.60a86bdaa47168f352bf50cafd632b98.min.svg role=img width=48 height=48 style=margin-right:.8rem title="Author photo"><div style=font-size:1rem><div class=p-author itemprop=author>Joe Bartlett
<span style=opacity:.8>(he/him, they/them)</span></div><div style=color:var(--soft-violet)><time class=dt-published datetime=2020-09-13 itemprop=datePublished title=Published>Sep 13, 2020</time></div></div></div></header><div class=e-content itemprop=articleBody><p>ICO remains a popular format for favicons. Historically images within an ICO were bitmaps, but the format has long supported PNG too. Since it makes for smaller filesizes, I figured ImageMagick would make a PNG-based ICO if fed only PNG sources:</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>convert 16x16.png 32x32.png 48x48.png favicon.ico
</code></pre></div><p>Output size: <strong>15 KB</strong> üôÄ ‚Äì almost 8√ó my sources. <a href=www.kodlian.com/apps/icon-slate>Icon Slate</a> yields similar: 18 KB. Both tools are bundling bitmaps into the ICO rather than the source PNGs.</p><p>I thrashed around looking for an open source lib or tool that reliably packages an ICO of PNG images but my luck was bad enough I began to wonder if I&rsquo;d made up the whole thing about ICO serving as a PNG container.</p><p>I hadn‚Äôt, but I reflexively turned to Wikipedia <a href=https://en.wikipedia.org/wiki/ICO_%5c%28file_format%5c%29#Outline rel=external>where the ICO format is so well documented</a> (and the format itself so straightforward) that I decided to write <a href=https://github.com/redoPop/ico-packer rel=external>a small Node library dedicated to the task of packaging PNG images into an ICO</a>. Here&rsquo;s how I use it:</p><div class=highlight><pre class=chroma><code class=language-js data-lang=js><span class=kr>const</span> <span class=nx>fs</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;fs&#39;</span><span class=p>);</span>
<span class=kr>const</span> <span class=nx>pack</span> <span class=o>=</span> <span class=nx>require</span><span class=p>(</span><span class=s1>&#39;ico-packer&#39;</span><span class=p>);</span>

<span class=nx>fs</span><span class=p>.</span><span class=nx>writeFileSync</span><span class=p>(</span><span class=s1>&#39;favicon.ico&#39;</span><span class=p>,</span> <span class=nx>pack</span><span class=p>([</span>
  <span class=nx>fs</span><span class=p>.</span><span class=nx>readFileSync</span><span class=p>(</span><span class=s1>&#39;16x16.png&#39;</span><span class=p>),</span>
  <span class=nx>fs</span><span class=p>.</span><span class=nx>readFileSync</span><span class=p>(</span><span class=s1>&#39;32x32.png&#39;</span><span class=p>),</span>
  <span class=nx>fs</span><span class=p>.</span><span class=nx>readFileSync</span><span class=p>(</span><span class=s1>&#39;48x48.png&#39;</span><span class=p>),</span>
<span class=p>]));</span>
</code></pre></div><p>Output size: <strong>2 KB</strong> üòΩ</p><p>This isn&rsquo;t a new trick ‚Äì <a href="https://devblogs.microsoft.com/oldnewthing/20101022-00/?p=12473" rel=external>it&rsquo;s baked into the format</a> and several &ldquo;favicon generator&rdquo; websites have been doing it for years ‚Äì but if anyone else has the same trouble finding a working tool then hopefully this strikes the right keywords to help you out. ‚ù§Ô∏è</p><p><a href=https://www.npmjs.com/package/ico-packer rel=external>ico-packer is available on npm</a>.</p></div><p style=margin-top:3rem><span style="border-top:3px solid var(--light-violet);padding-top:.6rem">Questions/corrections?
<a href=mailto:joe@redopop.com>Reach out!</a></span></p></div></main></div><footer class=Footer role=contentinfo><div class="container Footer__container"><span>redoPop is Joe Bartlett,<br>World Wide Web-slinger
&#9729;</span><div class=Footer__social><div class=Social><a href=https://github.com/redoPop rel="me external" title="redoPop on GitHub"><svg viewBox="0 0 100 100" aria-hidden="true"><use xlink:href="https://redopop.com/images/social.c9e36e50658d69fa75a2243f8458c1c7.min.svg#github"/></svg></a><a href=https://pinboard.in/u:redoPop rel="me external" title="redoPop on Pinboard"><svg viewBox="0 0 100 100" aria-hidden="true"><use xlink:href="https://redopop.com/images/social.c9e36e50658d69fa75a2243f8458c1c7.min.svg#pinboard"/></svg></a><a href=https://twitter.com/redoPop rel="me external" title="redoPop on Twitter"><svg viewBox="0 0 100 100" aria-hidden="true"><use xlink:href="https://redopop.com/images/social.c9e36e50658d69fa75a2243f8458c1c7.min.svg#twitter"/></svg></a></div></div></div></footer></body></html>